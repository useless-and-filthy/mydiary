<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Diary - Register</title>
  <meta name="description" content="Best diary for android and web with backup, restore, sync, passcode and more features">
  <meta name="keywords" content="my diary app free noads no ads passcode backup restore sync web android">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="neon.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container"> <a class="navbar-brand" href="index.html">
        <i class="fa d-inline fa-lg fa-circle-o"></i>
        <b> My Diary</b>
      </a> <button class="navbar-toggler navbar-toggler-right border-0" type="button" data-toggle="collapse" data-target="#navbar11">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar11">
        <!-- <ul class="navbar-nav mr-auto">
          <li class="nav-item" id="writeNew"> <a class="nav-link" target="_blank" href="diary.html">Write</a> </li>
        </ul> -->
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <li class="nav-item" > <a class="nav-link text-primary" href="login.html">Login</a> </li>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="p-5 col-md-7 d-flex flex-column justify-content-center">
          <h3 class="display-4 mb-3">Heaven and earth</h3>
          <p class="mb-4 lead">Seem to dwell in my soul and absorb its power, like the form of a beloved mistress, then I often think with longing, Oh, would I could describe these conceptions.</p>
        </div>
        <div class="p-5 col-md-5">
          <h3 class="mb-3">Registration</h3>
          <form id="login_form">
            <div class="form-group"> <label>Username</label> <input class="form-control" id="username" placeholder="Username" required="required" type="text"> </div>
            <div class="form-group"> <label>Email</label> <input class="form-control" id="email" placeholder="Email" required="required" type="email"> </div>
            <div class="form-group"> <label>Password</label> <input type="password" id="password" class="form-control" placeholder="Password"> </div>
            <p id="helper_text"></p>
            <button id="signUpBtn" type="button" class="btn mt-4 btn-block btn-outline-dark p-2" onclick="signUp()"><b>Create Account</b></button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://npmcdn.com/parse/dist/parse.min.js"></script>
  <script type="text/javascript" src="js/init.js"></script>
  <script>
    var currentUser = Parse.User.current();
    if (currentUser) {
      window.location = 'index.html';
    } else {
      console.log("came for signup");
    }
    const username = document.getElementById('username');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const messageView = document.getElementById('helper_text');
    const signUpBtn = document.getElementById('signUpBtn');


    function signUp() {
      signUpBtn.disabled = true;
      messageView.innerHTML = "Logging in...";
    // Create a new instance of the user class
    var user = new Parse.User();
    user.set("username", username.value);
    user.set("password", password.value);
    user.set("email", email.value);
    user.signUp().then(function(user) {
        // console.log('User created successful with name: ' + user.get("username") + ' and email: ' + user.get("email"));
        // var currentUser = Parse.User.current();
        // if (currentUser) {
        //   console.log("sending");
          
        // }
        }).catch(function(error){
            console.log("Error: " + error.code + " " + error.message);
            signUpBtn.disabled = false;
            messageView.innerHTML = error.message;
        });
}
  </script>
</body>

</html>